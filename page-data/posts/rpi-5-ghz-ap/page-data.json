{"componentChunkName":"component---src-components-post-index-js","path":"/posts/rpi-5-ghz-ap/","result":{"data":{"site":{"siteMetadata":{"title":"새로운 시작","author":{"name":"Neosarchizo"},"social":{"twitter":"neosarchizo","facebook":"neosarchizo.blog","github":"neosarchizo"},"siteUrl":"https://neosarchizo.github.io"}},"markdownRemark":{"id":"289907e9-256f-5875-b14e-17c20ac80dae","excerpt":"라즈베리 파이 4의 WiFi의 경우 2.4 GHz와 5 GHz 모두 동작이 가능하다. 따라서 라즈베리 파이 4를 5 GHz AP 모드로 설정이 가능하다. 우선 라즈베리 파이 터미널에서 다음과 같이 입력한다.  : AP모드로 설정해주는 패키지  : DNS, DHCP…","html":"<p>라즈베리 파이 4의 WiFi의 경우 2.4 GHz와 5 GHz 모두 동작이 가능하다. 따라서 <a href=\"https://www.raspberrypi.org/documentation/configuration/wireless/access-point-routed.md\">라즈베리 파이 4를 5 GHz AP 모드로 설정</a>이 가능하다. 우선 라즈베리 파이 터미널에서 다음과 같이 입력한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y hostapd dnsmasq\n<span class=\"token function\">sudo</span> <span class=\"token assign-left variable\">DEBIAN_FRONTEND</span><span class=\"token operator\">=</span>noninteractive <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y netfilter-persistent iptables-persistent</code></pre></div>\n<ul>\n<li><code class=\"language-text\">hostapd</code> : AP모드로 설정해주는 패키지</li>\n<li><code class=\"language-text\">dnsmasq</code> : DNS, DHCP를 관리해주는 패키지</li>\n<li><code class=\"language-text\">netfilter-persistent</code>, <code class=\"language-text\">iptables-persistent</code> : 방화벽 관련 패키지들</li>\n</ul>\n<p>패키지들을 설치했다면 고정 IP를 설정할 차례다. 여기서는 AP 역할을 하는 라즈베리 파이의 IP를 <code class=\"language-text\">192.168.4.1</code>로 설정할거다. 다음과 같이 입력해서 에디터를 연다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/dhcpcd.conf</code></pre></div>\n<p>에디터가 열리면 파일 맨 밑에 아래 내용을 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">interface wlan0\n    static ip_address=192.168.4.1/24\n    nohook wpa_supplicant</code></pre></div>\n<p>라즈베리 파이에 유선으로 인터넷을 연결한 뒤 AP에 연결되는 클라이언트들이 유선 네트워크를 사용하도록 할 수 있다. 하지만 필자는 그 부분은 필요없기 떄문에 넘어간다. 필요한 사람은 라즈베리 파이 홈페이지 원문을 참고(<a href=\"https://www.raspberrypi.org/documentation/configuration/wireless/access-point-routed.md\">Enable routing and IP masquerading</a>)바란다.</p>\n<p>다음은 DHCP와 DNS 관련 설정을 할 차례다. 다음을 입력해 기존 설정을 백업하고, 에디터를 연다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> /etc/dnsmasq.conf /etc/dnsmasq.conf.orig\n<span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/dnsmasq.conf</code></pre></div>\n<p>에디터가 열리면 파일에 다음과 같이 입력하고 저장한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">interface=wlan0 # Listening interface\ndhcp-range=192.168.4.2,192.168.4.20,255.255.255.0,24h\n                # Pool of IP addresses served via DHCP\ndomain=wlan     # Local wireless DNS domain\naddress=/gw.wlan/192.168.4.1\n                # Alias for this router</code></pre></div>\n<p>위와 같이 설정하면 클라이언트의 IP 주소를 <code class=\"language-text\">192.168.4.2 ~ 192.168.4.20</code> 안에서 24시간 동안 사용할 수 있도록 설정한다. 그리고 동일한 네트워크 안에서 <code class=\"language-text\">gw.wlan</code>을 이용해 라즈베리 파이에 연결이 가능하다. </p>\n<p>라즈베리 파이의 WiFi의 경우 <code class=\"language-text\">WiFi country code</code>에 따라 동작이 됐다 안 됐다 하는 경우가 있다. 필자는 이걸 <code class=\"language-text\">AD</code>로 설정해서 사용한다.</p>\n<p>다음으로 <code class=\"language-text\">hostapd</code> 관련 설정을 할 차례다. 다음과 같이 입력해 에디터를 연다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/hostapd/hostapd.conf</code></pre></div>\n<p>에디터가 열리면 다음과 같이 입력한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">country_code=AD\ninterface=wlan0\nssid=neosarchizo-rpi\nhw_mode=a\nchannel=36\nmacaddr_acl=0\nauth_algs=1\nignore_broadcast_ssid=0\nwpa=2\nwpa_passphrase=AbCd1234\nwpa_key_mgmt=WPA-PSK\nwpa_pairwise=TKIP\nrsn_pairwise=CCMP</code></pre></div>\n<p>필자의 경우 <code class=\"language-text\">WiFi country code</code>를 <code class=\"language-text\">AD</code>로 설정한다고 했는데, 이에 맞춰 <code class=\"language-text\">country_code=AD</code>와 같이 입력한다. 그리고 5 GHz의 경우 <code class=\"language-text\">hw_mode=a</code>와 같이 입력한다. <code class=\"language-text\">hw_mode</code>는 다음과 같이 설정이 가능하다.</p>\n<ul>\n<li>a = IEEE 802.11a (5 GHz) (라즈베리 파이 3 B+ 이상)</li>\n<li>b = IEEE 802.11b (2.4 GHz)</li>\n<li>g = IEEE 802.11g (2.4 GHz)</li>\n</ul>\n<p>이 <code class=\"language-text\">hw_mode</code>를 수정하는 경우 그에 맞춰 <code class=\"language-text\">channel</code>도 바꿔줘야된다. 여기서는 5 GHz 기준으로 모든 국가에서 호환되는 <code class=\"language-text\">channel=36</code>을 설정했다. 이와 관련해서는 <a href=\"https://en.wikipedia.org/wiki/List_of_WLAN_channels#5_GHz_or_5.9_GHz_(802.11a/h/j/n/ac/ax)\">위키피디아</a>를 참고하길 바란다.</p>\n<p>모두 입력했다면 터미널에서 다음을 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token function\">reboot</span></code></pre></div>\n<p>라즈베리 파이가 리붓하고 주위 WiFi를 검색했을때 <code class=\"language-text\">neosarchizo-rpi</code>가 뜨는 것을 볼 수 있을 것이다. 그리고 비밀번호로 <code class=\"language-text\">AbCd1234</code>를 입력하면 접속이 된다. 설정을 바꾸고 싶다면, <code class=\"language-text\">/etc/hostapd/hostapd.conf</code>의 설정을 바꾸길 바란다.</p>","frontmatter":{"title":"라즈베리 파이 4를 5 GHz AP 모드로 설정하기","date":"2021-02-10T05:06:10.260Z","coverImage":{"src":"https://cdn.pixabay.com/photo/2018/06/04/23/42/raspberry-3454504_1280.jpg","owner":{"name":"ulleo","link":"https://pixabay.com/users/ulleo-1834854/"},"platform":{"name":"pixabay","link":"https://pixabay.com"}}}}},"pageContext":{"slug":"/posts/rpi-5-ghz-ap/"}}}